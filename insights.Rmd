---
title: "Music Insights"
author: "Michael Messmer"
output: html_notebook
---

First, we need to use the tidyverse library for importing and manipulating our data.

```{r eval=FALSE}
install.packages("tidyverse")
library("tidyverse")

survey <- read_csv("https://raw.githubusercontent.com/introdsci/MusicSurvey/master/music-survey.csv")
preferences <- read_csv("https://raw.githubusercontent.com/introdsci/MusicSurvey/master/preferences-survey.csv")
```

Some of these column names are pretty bad, so let's make them more consistemt.

```{r}
colnames(survey)[colnames(survey) == "Timestamp"] <- "time_submitted"
bad <- "First, we are going to create a pseudonym for you to keep this survey anonymous (more or less). Which pseudonym generator would you prefer?"
colnames(survey)[colnames(survey) == bad] <- "pseudonym_generator"
colnames(survey)[colnames(survey) == "What is your pseudonym?"] <- "pseudonym"
colnames(survey)[colnames(survey) == "Sex"] <- "sex"
colnames(survey)[colnames(survey) == "Major"] <- "academic_major"
colnames(survey)[colnames(survey) == "Academic Year"] <- "academic_level"
colnames(survey)[colnames(survey) == "Year you were born (YYYY)"] <- "year_born"
colnames(survey)[colnames(survey) == "Which musical instruments/talents do you play? (Select all that apply)"] <- "instrument_list"
colnames(survey)[colnames(survey) == "Artist"] <- "favorite_song_artist"
colnames(survey)[colnames(survey) == "Song"] <- "favorite_song"
colnames(survey)[colnames(survey) == "Link to song (on Youtube or Vimeo)"] <- "favorite_song_link"
```

Now let's load some libraries for tidying the data.

```{r eval=FALSE}
library("dplyr")
library("tidyr")
```

Now let's create a "people" table that describes each person from the survey.

```{r}
people <- tibble("time_submitted"=survey$time_submitted, "pseudonym"=survey$pseudonym, "pseudonym_generator"=survey$pseudonym_generator, "sex"=survey$sex, "major"=survey$academic_major, "academic_level"=survey$academic_level, "year_born"=survey$year_born, "favorite_song"=survey$favorite_song)
```

Now let's create a "favorite songs" table that describes the reported favorite songs.

```{r}
favorite_songs <- tibble("pseudonym"=survey$pseudonym, "favorite_song_artist"=survey$favorite_song_artist, "favorite_song"=survey$favorite_song, "favorite_song_link"=survey$favorite_song_link)
```

```{r eval=FALSE}
library("readr")
```

```{r}
people$time_submitted <-parse_datetime(people$time_submitted, format="%m/%d/%y %H:%M")
```
